<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Air Quality Index - Breathe Better</title>
    <meta name="description" content="Real-time air quality monitoring across the world's major cities with AI-powered insights">
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes blob {
            0%, 100% { transform: translate(0, 0) scale(1); }
            25% { transform: translate(20px, -50px) scale(1.1); }
            50% { transform: translate(-20px, 20px) scale(0.9); }
            75% { transform: translate(50px, 50px) scale(1.05); }
        }
        @keyframes gradient {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        .animate-fadeIn { animation: fadeIn 0.6s ease-out; }
        .animate-blob { animation: blob 20s infinite; }
        .animation-delay-2000 { animation-delay: 2s; }
        .animation-delay-4000 { animation-delay: 4s; }
        .animate-gradient { 
            background-size: 200% 200%;
            animation: gradient 3s ease infinite;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Lucide React icons as inline SVGs
        const ChevronDown = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
        );

        const ChevronUp = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="18 15 12 9 6 15"></polyline>
            </svg>
        );

        const Info = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="16" x2="12" y2="12"></line>
                <line x1="12" y1="8" x2="12.01" y2="8"></line>
            </svg>
        );

        const Sparkles = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"></path>
                <path d="M5 3v4"></path>
                <path d="M19 17v4"></path>
                <path d="M3 5h4"></path>
                <path d="M17 19h4"></path>
            </svg>
        );

        const Wind = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M9.59 4.59A2 2 0 1 1 11 8H2m10.59 11.41A2 2 0 1 0 14 16H2m15.73-8.27A2.5 2.5 0 1 1 19.5 12H2"></path>
            </svg>
        );

        const Globe = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="2" y1="12" x2="22" y2="12"></line>
                <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
            </svg>
        );

        const Heart = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
        );

        const Shield = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
            </svg>
        );

        const Building2 = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"></path>
                <path d="M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2"></path>
                <path d="M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2"></path>
                <path d="M10 6h4"></path>
                <path d="M10 10h4"></path>
                <path d="M10 14h4"></path>
                <path d="M10 18h4"></path>
            </svg>
        );

        const Leaf = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z"></path>
                <path d="M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12"></path>
            </svg>
        );

        const AlertCircle = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="8" x2="12" y2="12"></line>
                <line x1="12" y1="16" x2="12.01" y2="16"></line>
            </svg>
        );

        const Zap = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
            </svg>
        );

        const AQIExplorer = () => {
            const [cities, setCities] = useState([]);
            const [expandedCity, setExpandedCity] = useState(null);
            const [loadingAI, setLoadingAI] = useState(false);
            const [aiAnalysis, setAiAnalysis] = useState({});
            const [showCount, setShowCount] = useState(50);
            const [lastUpdated, setLastUpdated] = useState(null);
            const [isRefreshing, setIsRefreshing] = useState(false);

            const getAQICategory = (aqi) => {
                if (aqi <= 50) return { 
                    label: 'Good', 
                    color: 'from-emerald-400 via-green-500 to-teal-600', 
                    glow: 'shadow-emerald-500/50',
                    border: 'border-emerald-400/30',
                    icon: 'ðŸŒŸ'
                };
                if (aqi <= 100) return { 
                    label: 'Moderate', 
                    color: 'from-yellow-400 via-amber-500 to-orange-500', 
                    glow: 'shadow-yellow-500/50',
                    border: 'border-yellow-400/30',
                    icon: 'âš ï¸'
                };
                if (aqi <= 150) return { 
                    label: 'Unhealthy for Sensitive', 
                    color: 'from-orange-400 via-red-500 to-pink-600', 
                    glow: 'shadow-orange-500/50',
                    border: 'border-orange-400/30',
                    icon: 'ðŸ˜·'
                };
                if (aqi <= 200) return { 
                    label: 'Unhealthy', 
                    color: 'from-red-500 via-rose-600 to-red-700', 
                    glow: 'shadow-red-500/50',
                    border: 'border-red-400/30',
                    icon: 'ðŸš¨'
                };
                if (aqi <= 300) return { 
                    label: 'Very Unhealthy', 
                    color: 'from-purple-500 via-fuchsia-600 to-purple-700', 
                    glow: 'shadow-purple-500/50',
                    border: 'border-purple-400/30',
                    icon: 'â˜ ï¸'
                };
                return { 
                    label: 'Hazardous', 
                    color: 'from-red-600 via-rose-700 to-black', 
                    glow: 'shadow-red-700/50',
                    border: 'border-red-600/30',
                    icon: 'ðŸ’€'
                };
            };

            const cityLandmarks = {
                'Delhi': { 
                    image: 'https://images.unsplash.com/photo-1587474260584-136574528ed5?w=800&q=80', 
                    name: 'India Gate', 
                    desc: 'Iconic war memorial monument',
                    gradient: 'from-orange-500/20 to-red-500/20'
                },
                'Lahore': { 
                    image: 'https://images.unsplash.com/photo-1598128558393-70ff21433be0?w=800&q=80', 
                    name: 'Badshahi Mosque', 
                    desc: 'Majestic Mughal-era mosque',
                    gradient: 'from-pink-500/20 to-purple-500/20'
                },
                'Dhaka': { 
                    image: 'https://images.unsplash.com/photo-1564479876770-105f8ff95f6d?w=800&q=80', 
                    name: 'National Parliament', 
                    desc: 'Jatiya Sangsad Bhaban',
                    gradient: 'from-green-500/20 to-teal-500/20'
                },
                'Baghdad': { 
                    image: 'https://images.unsplash.com/photo-1578895101408-1a36b834405b?w=800&q=80', 
                    name: 'Al-Shaheed Monument', 
                    desc: 'Martyrs Monument',
                    gradient: 'from-blue-500/20 to-cyan-500/20'
                },
                'Kolkata': { 
                    image: 'https://images.unsplash.com/photo-1558431382-27343974c572?w=800&q=80', 
                    name: 'Victoria Memorial', 
                    desc: 'British Raj monument',
                    gradient: 'from-yellow-500/20 to-orange-500/20'
                },
                'Mumbai': { 
                    image: 'https://images.unsplash.com/photo-1566552881560-0be862a7c445?w=800&q=80', 
                    name: 'Gateway of India', 
                    desc: 'Iconic colonial archway',
                    gradient: 'from-blue-500/20 to-indigo-500/20'
                },
            };

            const fetchAQIData = async () => {
                setIsRefreshing(true);
                
                const mockData = [
                    { rank: 1, city: 'Delhi', country: 'India', aqi: 185 },
                    { rank: 2, city: 'Lahore', country: 'Pakistan', aqi: 177 },
                    { rank: 3, city: 'Dhaka', country: 'Bangladesh', aqi: 169 },
                    { rank: 4, city: 'Baghdad', country: 'Iraq', aqi: 164 },
                    { rank: 5, city: 'Kolkata', country: 'India', aqi: 162 },
                    { rank: 6, city: 'Mumbai', country: 'India', aqi: 158 },
                ];

                for (let i = 7; i <= 100; i++) {
                    mockData.push({
                        rank: i,
                        city: `City ${i}`,
                        country: 'Country',
                        aqi: Math.max(50, 180 - i)
                    });
                }

                await new Promise(resolve => setTimeout(resolve, 1500));
                
                setCities(mockData);
                setLastUpdated(new Date());
                setIsRefreshing(false);
            };

            useEffect(() => {
                fetchAQIData();
                const interval = setInterval(() => {
                    fetchAQIData();
                }, 604800000);
                return () => clearInterval(interval);
            }, []);

            const generateAIAnalysis = async (city) => {
                if (aiAnalysis[city.city]) return;
                setLoadingAI(true);
                
                try {
                    const response = await fetch("https://api.anthropic.com/v1/messages", {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({
                            model: "claude-sonnet-4-20250514",
                            max_tokens: 1000,
                            messages: [{ role: "user", content: `Analyze air quality in ${city.city}, ${city.country} with AQI of ${city.aqi}. Provide: 1. Main causes (2-3 sentences) 2. Health impact (2 sentences) 3. 3 practical citizen actions to reduce pollution 4. 2 government initiatives or policies addressing this. Format as JSON: {"causes": "...", "health": "...", "citizenActions": ["action1", "action2", "action3"], "govInitiatives": ["initiative1", "initiative2"], "sources": {"scientific": 40, "government": 30, "environmental": 30}}. Respond ONLY with the JSON, no markdown or preamble.` }],
                        })
                    });
                    const data = await response.json();
                    let text = data.content.map(i => i.text || "").join("\n");
                    text = text.replace(/```json|```/g, "").trim();
                    const analysis = JSON.parse(text);
                    setAiAnalysis(prev => ({ ...prev, [city.city]: analysis }));
                } catch (err) {
                    console.error("AI Analysis error:", err);
                }
                setLoadingAI(false);
            };

            const toggleCity = (city) => {
                if (expandedCity?.city === city.city) {
                    setExpandedCity(null);
                } else {
                    setExpandedCity(city);
                    generateAIAnalysis(city);
                }
            };

            return (
                <div className="min-h-screen bg-black relative overflow-hidden">
                    {/* Animated Background */}
                    <div className="fixed inset-0 opacity-30">
                        <div className="absolute top-0 left-0 w-full h-full bg-gradient-to-br from-purple-600 via-blue-600 to-cyan-600 animate-pulse"></div>
                        <div className="absolute top-1/4 left-1/4 w-96 h-96 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob"></div>
                        <div className="absolute top-1/3 right-1/4 w-96 h-96 bg-cyan-500 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-2000"></div>
                        <div className="absolute bottom-1/4 left-1/2 w-96 h-96 bg-pink-500 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-4000"></div>
                    </div>

                    {/* Content */}
                    <div className="relative z-10">
                        {/* Hero Section */}
                        <div className="relative overflow-hidden py-20 px-6">
                            <div className="relative max-w-7xl mx-auto text-center">
                                <div className="inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-cyan-500/20 to-purple-500/20 backdrop-blur-xl border border-cyan-400/30 rounded-full mb-8 animate-pulse">
                                    <Sparkles />
                                    <span className="text-cyan-300 font-semibold">Live Global Air Quality Monitor</span>
                                    <Wind />
                                </div>
                                
                                <h1 className="text-7xl md:text-8xl font-black mb-6 leading-tight">
                                    <span className="bg-clip-text text-transparent bg-gradient-to-r from-cyan-400 via-purple-400 to-pink-400 animate-gradient">
                                        Breathe
                                    </span>
                                    <br />
                                    <span className="bg-clip-text text-transparent bg-gradient-to-r from-pink-400 via-purple-400 to-cyan-400 animate-gradient">
                                        Better
                                    </span>
                                </h1>
                                
                                <p className="text-2xl text-gray-300 max-w-3xl mx-auto leading-relaxed mb-8">
                                    Real-time air quality insights powered by AI, helping you make informed decisions about your health and environment
                                </p>

                                {lastUpdated && (
                                    <div className="inline-flex items-center gap-3 px-6 py-3 bg-white/5 backdrop-blur-xl border border-white/10 rounded-full">
                                        <div className="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                                        <span className="text-gray-300 text-sm">
                                            Last updated: {lastUpdated.toLocaleDateString()} at {lastUpdated.toLocaleTimeString()}
                                        </span>
                                        <button 
                                            onClick={fetchAQIData}
                                            className="ml-2 text-cyan-400 hover:text-cyan-300 text-sm font-semibold"
                                            disabled={isRefreshing}
                                        >
                                            {isRefreshing ? 'Refreshing...' : 'Refresh Now'}
                                        </button>
                                    </div>
                                )}
                            </div>
                        </div>

                        {/* Cities Preview */}
                        <div className="max-w-7xl mx-auto px-6 pb-20">
                            <div className="text-center text-white text-2xl mb-8">
                                Monitoring {cities.length} cities worldwide
                            </div>
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                {cities.slice(0, showCount).map((city) => {
                                    const category = getAQICategory(city.aqi);
                                    const landmark = cityLandmarks[city.city] || { 
                                        image: 'https://images.unsplash.com/photo-1477959858617-67f85cf4f1df?w=800&q=80', 
                                        name: 'City Skyline', 
                                        desc: 'Urban landscape',
                                        gradient: 'from-gray-500/20 to-slate-500/20'
                                    };

                                    return (
                                        <div key={city.rank} className="group relative bg-white/5 backdrop-blur-xl rounded-2xl border border-white/10 overflow-hidden hover:scale-105 transition-all duration-500">
                                            <div className="relative h-48">
                                                <img 
                                                    src={landmark.image} 
                                                    alt={landmark.name}
                                                    className="w-full h-full object-cover"
                                                    onError={(e) => e.target.src = 'https://images.unsplash.com/photo-1477959858617-67f85cf4f1df?w=800&q=80'}
                                                />
                                                <div className={`absolute inset-0 bg-gradient-to-t ${landmark.gradient} to-black/60`}></div>
                                                <div className="absolute top-4 left-4">
                                                    <div className="bg-black/70 px-3 py-1 rounded-full text-white font-bold">#{city.rank}</div>
                                                </div>
                                                <div className="absolute top-4 right-4">
                                                    <div className={`bg-gradient-to-r ${category.color} px-4 py-2 rounded-xl text-white font-bold`}>
                                                        {city.aqi}
                                                    </div>
                                                </div>
                                                <div className="absolute bottom-4 left-4 right-4">
                                                    <h3 className="text-white font-bold text-xl">{city.city}</h3>
                                                    <p className="text-gray-300 text-sm">{city.country}</p>
                                                </div>
                                            </div>
                                            <div className="p-4">
                                                <div className={`flex items-center gap-2 ${category.color.replace('from-', 'text-').split(' ')[0].replace('via-', '').replace('to-', '')}`}>
                                                    <span className="text-2xl">{category.icon}</span>
                                                    <span className="text-white font-semibold">{category.label}</span>
                                                </div>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>

                            {showCount < 100 && (
                                <div className="text-center mt-12">
                                    <button
                                        onClick={() => setShowCount(Math.min(showCount + 50, 100))}
                                        className="bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-bold py-4 px-8 rounded-xl transition-all duration-300"
                                    >
                                        Load More Cities (+{Math.min(50, 100 - showCount)} more)
                                    </button>
                                </div>
                            )}
                        </div>

                        {/* Footer */}
                        <div className="bg-gradient-to-b from-black via-purple-900/20 to-black py-12">
                            <div className="max-w-7xl mx-auto px-6 text-center">
                                <div className="text-white mb-4">
                                    <p className="text-xl font-bold mb-2">Created with Claude AI</p>
                                    <p className="text-gray-400">Powered by Anthropic â€¢ Educational Demonstration</p>
                                </div>
                                <div className="text-gray-500 text-sm">
                                    <p>Auto-refreshes weekly â€¢ Data from IQAir, WHO, EPA</p>
                                    <p className="mt-2">Visit <a href="https://www.iqair.com/world-air-quality-ranking" className="text-cyan-400 hover:underline" target="_blank">IQAir</a> for official real-time data</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<AQIExplorer />, document.getElementById('root'));
    </script>
</body>
</html>
